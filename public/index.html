<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Karaoke Web Host</title>
  <link rel="stylesheet" href="css/style.css" />
</head>

<body>
  <h1>Karaoke Web ğŸ¤ (Host-PC)</h1>
  <h1>ğŸ¤ Karaoke</h1>
  <button id="btn-reset-rol" style="
  margin-bottom: 10px;
  background: #222;
  color: #fff;
  border: none;
  border-radius: 6px;
  padding: 6px 12px;
  font-size: 0.9em;
  cursor: pointer;
">Cambiar rol</button>


  <section class="player">
    <select id="selector-cancion"></select>
    <button id="btn-cargar">Cargar canciÃ³n</button>

    <!-- Controles explÃ­citos -->
    <button id="btn-play">â–¶ï¸ Play</button>
    <button id="btn-pause">â¸ï¸ Pausa</button>

    <button id="btn-mic">ğŸ™ï¸ Activar micrÃ³fono</button>
    <audio id="audio" controls></audio>
  </section>

  <section class="afinador">
    <div id="afinador-container">
      <canvas id="canvas-afinacion" width="800" height="180"></canvas>
      <div class="etiquetas">
        <span id="label-actual">â€“ Hz</span>
        <span id="label-estado" class="warn">Conectando...</span>
      </div>
    </div>
  </section>

  <section class="letra">
    <div id="letra-container">
      <p id="letra-actual">ğŸ¤ Canta aquÃ­â€¦</p>
    </div>
  </section>

  <!-- 1) Carga el cliente socket.io del servidor -->
  <script src="/socket.io/socket.io.js"></script>
  <!-- 2) Cliente propio: expone window.socket y actualiza #label-estado -->
  <script type="module" src="js/socketClient.js"></script>
  <!-- 3) Tu app -->
  <script type="module" src="js/karaoke.js"></script>
  <script type="module" src="js/script.js"></script>
  <!-- ğŸ”¹ Selector de Rol (solo aparece la primera vez) -->
  <div id="role-overlay" class="overlay">
    <div class="role-box">
      <h2>ğŸ¤ Selecciona tu rol</h2>
      <p>Elige cÃ³mo quieres participar:</p>
      <div class="role-buttons">
        <button id="btn-host">ğŸ™ï¸ Host</button>
        <button id="btn-user2">ğŸ§ User2</button>
      </div>
    </div>
  </div>
  <!-- ğŸ­ Selector visual de rol -->
  <div id="role-overlay" style="
  position: fixed;
  inset: 0;
  background: rgba(11, 15, 21, 0.95);
  color: #fff;
  display: none;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  font-family: system-ui, sans-serif;
">
    <h2 style="color:#80c8ff; margin-bottom: 20px;">Selecciona tu rol</h2>
    <div style="display: flex; gap: 20px;">
      <button id="btn-host" style="
      background:#5db3ff;
      color:#000;
      border:none;
      border-radius:8px;
      padding:12px 24px;
      font-size:16px;
      font-weight:bold;
      cursor:pointer;
    ">ğŸ™ï¸ Host-PC</button>

      <button id="btn-user2" style="
      background:#410b57;
      color:#fff;
      border:none;
      border-radius:8px;
      padding:12px 24px;
      font-size:16px;
      font-weight:bold;
      cursor:pointer;
    ">ğŸ§ Usuario 2</button>
    </div>
    <p style="margin-top:30px; font-size:13px; color:rgb(0, 26, 255);">(Tu elecciÃ³n se guardarÃ¡ automÃ¡ticamente)</p>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const btnReset = document.getElementById("btn-reset-rol");
      if (btnReset) {
        btnReset.addEventListener("click", () => {
          localStorage.removeItem("karaokeRole");
          alert("Rol eliminado. Se mostrarÃ¡ el selector de nuevo al recargar.");
          location.reload();
        });
      }
    });
  </script>

</body>

</html>